#!/usr/bin/env bash

# echo "Printing Empty Directory"
# ls -R -a

# echo "Printing piston files"
# cd /piston/packages/gleam/0.27.0/
# ls -R -a


gleam new project --skip-git
mkdir project/build
cp /piston/packages/gleam/0.27.0/project/manifest.toml project/manifest.toml
cp /piston/packages/gleam/0.27.0/project/build/packages* project/build -r || true

# cp project/build* project -r
# cp project/manifest.toml project/manifest.toml

echo "surviving sigkill"

echo $(cat $1)

cat $1 > project/src/project.gleam

cd project
# echo "Printing Copied Files"
ls -R -a
gleam build --target=javascript
